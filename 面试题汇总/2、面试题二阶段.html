<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>2、面试题二阶段</title>
</head>
<body>
<script>
    //  第一题
    if('m' in window){
        var m = m && 12;
    }
    console.log(m);

    //  第二题
    let n = 10;
    if(!('n' in window)){
        let n = n + 30;
    }
    console.log(n);

    //  第三题
    let n =10,
        m = 20;
    ~function(n,m){
        let arg = arguments;
        arg[0] = n || 100;
        arg[1] = m || 200;
        console.log(n, m);
    }(m)
    console.log(n, m);

    //  第四题
    let ary =[12,23,34,45];
    (function (ary){
        ary.pop();
        ary = ary.slice(0);
        ary.shift();
        console.log(ary);
    })(ary);
    console.log(ary);

    //  第五题
    var n =0,
        fn = function () {
            this.n *= 2;
            n++;
            return function (m) {
                n += ++m;
                console.log(n);
            }
        }
    var f = fn(2);
    f(3);
    fn(3)(4);
    f(4);
    console.log(n);

    //  第五题变种
    let i =2;
    let fn = function(n){
        i *= 2;
        return function(m) {
            i -= (n--) + (++m);
            console.log(i);
        }
    };
    let f = fn(1);
    f(2);
    fn(3)(4);
    f(5);
    console.log(i);

    //  第六题
    let n =1 ;
    let x = {
        n:2,
        y:(function(n){
            n = n|| 3;
            return function(m){
                m = m || 4;
                this.n += m++;
                n += ++m;
                console.log(n);
            }
        })(window.n)
    }
    let z = x.y;
    x.y(5);
    z(6);
    console.log(n, x.n);

    //  第七题
    let a = {n:4};
    let b =a;
    b.x = a = {n:10};
    console.log(a.x, b.x);

    // 第八题
    function C1(name) {
        if(name) this.name = name;
    }
    function C2(name) {
         this.name = name;
    }
    function C3(name) {
         this.name = name || "join";
    }
    C1.prototype.name = "Tom";
    C2.prototype.name = "Tom";
    C3.prototype.name = "Tom";
    alert(new C1().name + new C2().name + new C3().name)

    //  第九题
    let Fn = function(x = 0, y =0){
        this.x = x;
        this.y = y;
        this.getX = function () {
            console.log(this.x);
        }
    }
    Fn.prototype.getY = function () {
        console.log(this.y);
    }
    Fn.prototype = {
        setX: function (val) {
            this.x = val;
        },
        getX: function () {
            console.log(this.x)
        }
    }

    let f1 = new  Fn;
    let f2 = new Fn(1,2);
    console.log(f1.constructor);
    f1.setX(3);
    f1.getX();
    f1.__proto__.getX();
    f1.__proto__.setX(4);
    f2.getX();
    f2.__proto__.getX();
    f2.getY();

    //  第十题
    var a = 0;
    function fun() {
        alert(a);
        var a = 10;
    }
    fun();
    alert(a);

    //  第十一题
    let a = 0,
        b = 0;
    function A(a) {
        A = function (b) {
            alert(a + b++);
        }
        alert(a++);
    }
    A(1);
    A(2);

    //  第十二题
    window.val = 1;
    let json = {
        val: 10,
        dbl:function () {
            this.val *= 2;
        }
    }
    json.dbl();
    let dbl = json.dbl;
    dbl();
    json.dbl.call(window);
    alert(window.val + json.val);

    //  第十三题
    (function () {
        let val = 1;
        let json = {
            val:10,
            dbl: function () {
                val *= 2;
            }
        }
        json.dbl();
        alert(json.val + val);
    })();

    //  第十四题
    let test = (function (i) {
        return function () {
            alert(i *= 2);
        }
    })(2);
    test(5);
</script>
</body>
</html>