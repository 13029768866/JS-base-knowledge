<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>1、面试题1阶段</title>
</head>

<body>
  <script>
    // 1、第一题
    console.log(a);
    var a = 12;
    function fn() {
      console.log(a);
      var a = 13;
    }
    fn();
    console.log(a);

    //  第二题
    console.log(a);
    var a = 12;
    function fn() {
      console.log(a);
      a = 13;
    }
    fn();
    console.log(a);

    //    第三题
    console.log(a);
    a = 12;
    function fn() {
      console.log(a);
      a = 13;
    }
    fn();
    console.log(a);

    //    第四题
    var foo = 1;
    function bar() {
      if (!foo) {
        var foo = 10;
      }
      console.log(foo);
    }
    bar();

    //    第五题
    var n = 0;
    function a() {
      var n = 10;
      function b() {
        n++;
        console.log(n);
      }
      b();
      return b;
    }
    var c = a();
    c();
    console.log(n);

    //   第六题
    var a = 10,
      b = 11,
      c = 12;
    function test(a) {
      a = 1;
      var b = 2;
      c = 3;
    }
    test(10);
    console.log(a);
    console.log(b);
    console.log(c);

    //   第七题
    if (!("a" in window)) {
      var a = 1;
    }
    console.log(a);

    //   第八题
    var a = 4;
    function b(x, y, a) {
      console.log(a);
      arguments[2] = 10;
      console.log(a);
    }
    a = b(1, 2, 3);
    console.log(a);

    //   第九题
    var foo = "hello";
    (function (foo) {
      console.log(foo);
      var foo = foo || "world";
      console.log(foo);
    })(foo);
    console.log(foo);

    //   第十题
    var a = 9;
    function fn() {
      a = 0;
      return function (b) {
        return b + a++;
      };
    }
    var f = fn();
    console.log(f(5));
    console.log(fn()(5));
    console.log(f(5));
    console.log(a);

    //   第十一题
    var ary = [1, 2, 3, 4];
    function fn(ary) {
      ary[0] = 0;
      ary = [0];
      ary[0] = 100;
      return ary;
    }
    var res = fn(ary);
    console.log(ary);
    console.log(res);

    //   第十二题
    function fn(i) {
      return function (n) {
        console.log(n + i++);
      };
    }
    var f = fn(10);
    f(20);
    fn(20)(40);
    fn(30)(50);
    f(30);

    //   第十三题
    var i = 10;
    function fn() {
      return function (n) {
        console.log(n + ++i);
      };
    }
    var f = fn();
    f(20);
    fn()(20);
    fn()(30);
    f(30);

    //   第十四题
    var num = 10;
    var obj = { num: 20 };
    obj.fn = (function (num) {
      this.num = num * 3;
      num++;
      return function (n) {
        this.num += n;
        num++;
        console.log(num);
      };
    })(obj.num);
    var fn = obj.fn;
    fn(5);
    obj.fn(10);
    console.log(num, obj.num);

    //   第十四题变种
    var num = 10,
      obj = { num: 20 };
    obj.fn = (function (num) {
      num = this.num + 10;
      this.num = num + 10;
      return function () {
        this.num += ++num;
      };
    })(num);
    var fn = obj.fn;
    fn();
    obj.fn();
    console.log(num, obj.num);

    //   第十五题
    function Fn() {
      this.x = 100;
      this.y = 200;
      this.getX = function () {
        console.log(this.x);
      };
    }
    Fn.prototype.getX = function () {
      console.log(this.x);
    };
    Fn.prototype.getY = function () {
      console.log(this.y);
    };
    var f1 = new Fn();
    var f2 = new Fn();
    console.log(f1.getX === f2.getX);
    console.log(f1.getY === f2.getY);
    console.log(f1.__proto__.getY === Fn.prototype.getY);
    console.log(f1.__proto__.getX === f2.getX);
    console.log(f1.getX === Fn.prototype.getX);
    console.log(f1.constructor);
    console.log(Fn.prototype.__proto__.constructor);
    f1.getX();
    f1.__proto__.getX();
    f2.getY();
    Fn.prototype.getY();

    //  第十六题

    /*以下代码的功能是要实现为5个input按钮循环绑定click点击事件，绑定完成后点击1、2、3、4、5五个按钮分别会alert输出0、1、2、3、4五个字符。（腾讯）
          请问如下代码是否能实现？
          如果不能实现那么现在的效果是什么样的？
          应该做怎样的修改才能达到我们想要的效果，并说明原理？*/
    <div id="btnBox">
      <input type="button" value="button_1" />
      <input type="button" value="button_2" />
      <input type="button" value="button_3" />
      <input type="button" value="button_4" />
      <input type="button" value="button_5" />
    </div>


    var btnBox = document.getElementById('btnBox'),
      inputs = btnBox.getElementsByTagName('input');
    var l = inputs.length;
    for (var i = 0; i < l; i++) {
      inputs[i].onclick = function () {
        alert(i);
      }
    }

    //  第十七题
    var fullName = 'language';
    var obj = {
      fullName: 'javascript',
      prop: {
        getFullName: function () {
          return this.fullName;
        }
      }
    };
    console.log(obj.prop.getFullName());
    var test = obj.prop.getFullName;
    console.log(test());

    //  第十八题
    var name = 'window';
    var Tom = {
      name: "Tom",
      show: function () {
        console.log(this.name);
      },
      wait: function () {
        var fun = this.show;
        fun();
      }
    };
    Tom.wait();

    //  第十九题
    function fun() {
      this.a = 0;
      this.b = function () {
        alert(this.a);
      }
    } 
    fun.prototype = {
      b: function () {
        this.a = 20;
        alert(this.a);
      },
      c: function () {
        this.a = 30;
        alert(this.a)
      }
    }
    var my_fun = new fun();
    my_fun.b();
    my_fun.c();


    //  第二十题
    function Fn(){
      var n = 10;
      this.m = 20;
      this.aa = function(){
        console.log(this.m);
      }
    }
    Fn.prototype.bb = function () {
      console.log(this.n);
    }
    var f1 = new Fn();
    Fn.prototype = {
      aa:function(){
        console.log(this.m + 10);
      }
    }
    var f2 = new Fn;
    console.log(f1.constructor);
    console.log(f2.constructor);
    f1.bb();
    f1.aa();
    f2.bb();
    f2.aa();
    f2.__proto__.aa();

    //  第二十一题
    // 实现数组去重？
    Array.prototype.myUnique = function myUnique(){
      var obj = {};
      for(var i=0;i<this.length; i++){
        var item = this[i];
        obj.hasOwnProperty(item)?(this[i] = this[this.length - 1],this.length--,i--):obj[item] = item;        
      }
      obj = null;
      return this;
    }
  </script>
</body>

</html>